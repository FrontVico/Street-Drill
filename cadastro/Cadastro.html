<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuários</title>
</head>
<body>
    <h1>Cadastro de Usuários</h1>

    <form id="cadastroUsuarioForm">
        <label for="username">Username:</label><br>
        <input type="text" id="user" name="user" required placeholder="Qual nome de usuario deseja"><br><br>

        <label for="nome">Nome:</label><br>
        <input type="text" id="nome" name="nome" required placeholder="Digite seu nome aqui"><br><br>

        <label for="sobrenome">Sobrenome:</label><br>
        <input type="text" id="sobrenome" name="sobrenome" required placeholder="Digite seu sobrenome"><br><br>

        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" required placeholder="Digite seu melhor email"><br><br>

        <label for="senha">Senha:</label><br>
        <input type="password" id="senha" name="senha" required placeholder="Faça uma senha segura"><br><br>

        <button type="submit">Cadastrar</button>
    </form>

    <script src="https://unpkg.com/parse/dist/parse.min.js"></script>
    <script>
        // Inicializa o Parse
        Parse.initialize("OEwZoFZ1YRhiEAKSM3o08SPWscNrLt6kTiWhjWWM", "fplCVBTYJw9iQrfUdB1b7vlkFPdG9OgZFCLhpvz7"); // Substitua pelas suas credenciais do Back4App
        Parse.serverURL = 'https://parseapi.back4app.com/';

        document.getElementById('cadastroUsuarioForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const nome = document.getElementById('nome').value;
            const sobrenome = document.getElementById('sobrenome').value;
            const email = document.getElementById('email').value;
            const senha = document.getElementById('senha').value;
            const username = document.getElementById('email').value;

            if (!nome || !sobrenome || !email || !senha || !username) {
                alert('Por favor, preencha todos os campos!');
                return;
            }

            // Criar o usuário usando Parse.User
            const user = new Parse.User();
            user.set('username', username);  // Usar o email como username
            user.set('password', senha);
            user.set('email', email);
            user.set('nome', nome);
            user.set('sobrenome', sobrenome);

            try {
                await user.signUp();
                alert('Usuário cadastrado com sucesso!');
                document.getElementById('cadastroUsuarioForm').reset();
            } catch (error) {
                console.error('Erro ao cadastrar usuário:', error);
                alert('Erro ao cadastrar usuário: ' + error.message);
            }
        });
    </script>
</body>
</html>
